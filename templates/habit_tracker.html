{% extends "base.html" %}
{% block content %}
<div class="max-w-2xl mx-auto mt-10">
    <h2 class="text-3xl font-bold mb-6 text-center text-blue-900">Habit Tracker</h2>
    <form method="post" class="mb-8 bg-blue-900 rounded-lg shadow p-6 flex gap-2">
        <input name="habit_name" type="text" class="input input-bordered flex-1 bg-blue-100 text-blue-900" placeholder="What habit do you want to track?" required>
        <button type="submit" class="btn btn-primary bg-blue-800 border-blue-800 hover:bg-blue-950 text-white">Add Habit</button>
    </form>
    {% if habits %}
        <div class="space-y-6">
            {% for habit in habits %}
                <div class="bg-blue-800 rounded p-4 shadow">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-lg text-white">{{ habit.name }}</span>
                    </div>
                    <div class="flex gap-2 justify-center">
                        {% for i in range(7) %}
                            {% set day = week_dates[i] %}
                            <form method="post" style="display:inline;">
                                <input type="hidden" name="done_habit_id" value="{{ habit.id }}">
                                <input type="hidden" name="done_date" value="{{ day }}">
                                <label class="flex flex-col items-center cursor-pointer">
                                    <input type="checkbox"
                                           name="done"
                                           onchange="this.form.submit()"
                                           {% if habit_done[habit.id][day.isoformat()] %}checked disabled{% endif %}
                                           class="checkbox checkbox-sm checkbox-info mb-1">
                                    <span class="text-xs text-blue-100">{{ week_days[i] }}</span>
                                </label>
                            </form>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-center text-blue-300 mt-6 text-lg">What habit do you want to track?</p>
    {% endif %}
</div>
{% endblock %}